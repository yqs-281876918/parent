<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/highcharts.js"></script>
    <!--    <script type="text/javascript" src="assets/js/exporting.js"></script>-->
    <script type="text/javascript" src="assets/js/modernizr.custom.04022.js"></script>
    <script src="https://cdn.bootcss.com/echarts/3.7.1/echarts.min.js"></script>
</head>
<body onload="init()">
<div id="container" style="height: 400px">
</div>

<script>
    var Barlist=[];
    var BarArr;
    function init(){
        var examId = sessionStorage.getItem("examId");
        var totalScore = sessionStorage.getItem("totalScore");
        var personNum = sessionStorage.getItem("personNum");
        var param={
            "examId":examId,
            "totalScore":totalScore,
            "personNum":6
        };
        console.log(param);
        console.log(personNum);

        var myChart = echarts.init(document.getElementById('container'));
        // 指定图表的配置项和数据
        var option1 = {
            backgroundColor:'#FAFAD2',
            title: {
                text: '各分数段比例统计',
                left: 'center',
                //标题栏的高度，值越大，距离顶部的距离越大
                top: 50,
                //标题栏字体的颜色
                textStyle: {
                    color: '#FFD700'
                }
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['0-20','20-40','40-60','60-80','80-100']
            },
            visualMap: {
                show: false,
                //饼图中在最大值最小值颜色范围中的亮度，值越大颜色越深
                min:10,
                max: 600,
                inRange: {
                    //0-1之间，值越小颜色越深
                    colorLightness: [0, 1]
                }
            },
            series : [
                {
                    //饼图中内容介绍
                    name: '各分数段统计',
                    //统计表的类型
                    type: 'pie',
                    //饼图的弧度，值越小生成的饼状图越小
                    radius: '90%',
                    //饼图生成后的位置
                    center: ['50%', '50%'],
                    data: [
                        {value: '', name: '0-20'},
                        {value: '', name: '20-40'},
                        {value: '', name: '40-60'},
                        {value: '', name: '60-80'},
                        {value: '', name: '80-100'}
                    ],
                    itemStyle: {
                        normal: {
                            label: {
                                show: true,
                                formatter: "{b} :\n  {c} \n ({d}%)",
                                position: "inner"
                            }
                        }
                    },
                    roseType: 'radius',
                    //饼状图的外围标签
                    label: {
                        normal: {
                            textStyle: {
                                color: 'rgba(0, 0, 0, 0.3)'
                            }
                        }
                    },
                    //指向外围标签的线条
                    labelLine: {
                        normal: {
                            lineStyle: {
                                color: 'rgba(0, 0, 255, 0.3)'
                            },
                            smooth: 0.2,
                            length: 10,
                            length2: 20
                        }
                    },

                }
            ],
        };

        jQuery.post("/teacher/analyse/percentage",param,function(rst){
            console.log(rst);
            BarArr=rst;
            for(var i=0;i<BarArr.length;i++){
                option1.series[0].data.push(BarArr[i]);
            }
            myChart.setOption(option1);
        })
    }
</script>
<script >
    function bar(){

    }

</script>
</body>

</html>