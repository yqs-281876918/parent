<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!--    <script type="text/javascript" src="assets/js/echarts.min.js"></script>-->
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.common.min.js"></script>
</head>
<body onload="init()">
<div id="container" style="height: 400px">
</div>

<script>
    var Barlist=[];
    var BarArr;
    function init(){
        var examId = sessionStorage.getItem("examId");
        var totalScore = sessionStorage.getItem("totalScore");
        var personNum = sessionStorage.getItem("personNum");
        var param={
            "examId":examId,
            "totalScore":totalScore,
            "personNum":6
        };
        console.log(param);
        console.log(personNum);

        var myChart = echarts.init(document.getElementById('container'));
        // 指定图表的配置项和数据
        var option1 = {
            backgroundColor:'#FAFAD2',
            title: {
                text: '各分数段比例统计',
                left: 'center',
                //标题栏的高度，值越大，距离顶部的距离越大
                top: 20,
                //标题栏字体的颜色
                textStyle: {
                    color: '#ccc'
                }
            },
            tooltip: {
                trigger: 'item',
                // formatter: '{a} <br/>{b} : {c}'
            },
            legend: {
                orient: 'vertical',
                left: '70%',  //图例距离左的距离
                y: 'center',  //图例上下居中
            },
            color:['rgb(203,55,255)', 'rgb(149,162,255)', 'rgb(58,186,255)',
                'rgb(119,168,249)', 'rgb(235,161,159)'],
            series : [
                {
                    name: "分数段人数",
                    type:'pie',
                    // clockwise:'true',
                    startAngle:'0',
                    radius : '60%',
                    center: ['50%', '50%'],
                    data: [

                        {name: '0.0-20.0',value: ''},
                        {name: "20.0-40.0",value: '' },
                        {name: "40.0-60.0",value: '' },
                        {name: "60.0-80.0",value: ''},
                        {name: "80.0-100.0",value: ''}
                    ],
                    itemStyle:{
                        normal:{
                            label:{
                              show:true,
                              position:'inner',
                              textStyle: {
                                  fontSize:10,
                              }
                            },
                            labelLine:{
                                show:true,
                            }
                        }
                    }

                }
            ],

        };

        jQuery.post("/teacher/analyse/percentage",param,function(rst){
            console.log(rst);
            BarArr=rst;
            for(var i=0;i<BarArr.length;i++){
                option1.series[0].data.push(BarArr[i]);
            }
            myChart.setOption(option1);
        })
    }
</script>
</body>

</html>