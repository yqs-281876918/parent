<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>试卷管理</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body onload="getallpaper()">
<div id="data">

</div>




<div><button onclick="manual()">添加新试卷</button></div>
</body>
<script>
    function getallpaper() {
        //var sen="<table>";
        var sen="";
        var parm={};
        jQuery.post("/paper/papercontrol/getAll",parm,function (rst) {
            var rst1=rst.list;
            //alert("rstlength="+rst.length);
            for(var i=0;i<rst.length;i++){
                var uu=rst[i];
                sen=sen+`<table onclick="showpaper('${uu.id}')">
                    <tr><td>'${uu.foreWord}'</td></tr>
                    <tr><td>学科：'${uu.courseID}'</td><td><button onclick=\"copypaper('${uu.id}')\">复制</button></td></tr>
                    <tr><td>开放：'${uu.open}'</td><td><button onclick=\"sealed('${uu.id}')\">封存</button></td></tr>
                    <tr><td>难度：'${uu.difficulty}'</td><td><button onclick=\"deletepaper('${uu.id}')\">删除</button></td></tr>
                    <tr><td>时间：'${uu.date}'</td><td><button onclick=\"pushpaper('${uu.id}')\">发布</button></td></tr>
                    <tr><td>管理：'${uu.creator}'</td><td><button onclick=\"assign('${uu.id}')\">分配教师</button></td></tr>
                    </table>`
            }
            //sen=sen+"</table>";
            jQuery("#data").html(sen);
        })

    }
</script>
<script>
    function sealed(id) {
        var parm={
            "id":id
        }
        jQuery.post("/paper/papercontrol/sealed",parm,function (rst) {
            alert(rst);
        })
        location.reload(true);
    }
</script>
<script>
    function copypaper(id) {
        var parm={
            "id":id
        }
        jQuery.post("/paper/papercontrol/copy",parm,function (rst) {
            alert(rst);
        })
        location.reload(true);
    }
</script>
<script>
    function pushpaper(id) {
        var parm={
            "id":id
        }
        jQuery.post("/paper/papercontrol/push",parm,function (rst) {
            alert(rst);
        })
    }
</script>
<script>
    function deletepaper(id) {
        var parm={
            "id":id
        }
        jQuery.post("/paper/papercontrol/delete",parm,function (rst) {
            alert(rst);
        })
        location.reload(true);
    }
</script>
<script>
    function assign(id) {
        var parm={
            "id":id
        }
        jQuery.post("/paper/papercontrol/assign",parm,function (rst) {
            alert(rst);
        })
    }
</script>
<script>
    function showpaper(id) {
        location.href="edit.html?"+'id='+encodeURI(id);
    }
</script>
<script>
    function manual() {
        location.href="../create/artificial.html";
    }
</script>
<body>

</body>
</html>